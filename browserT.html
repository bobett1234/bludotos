<html>
<head>
<script>

/** Copyright 2011 dvlpt.com */

(function(lib) {
	lib = {
		jsonp : function jsonp(u,cb,cbid){var a=jsonp._c=(jsonp._c||0)+1,b=cbid||'picojsonpcb'+a,c=document,d=c.body,s=c.createElement('script');window[b]=function(){this[b]=null;d.removeChild(s);cb.apply(cb,arguments);cb=c=d=s=null;};s.src=u.replace('{callback}',b);d.appendChild(s);},
		isArray : function(a){return Object.prototype.toString.call(a)==='[object Array]';},
		create : function(p,parent){var el=document.createElement(p.type || 'div'),i,frag;parent=parent||p.parent;if(p.attrs){lib.attrs(el,p.attrs);}if(p.props){lib.extend(el,p.props);}if(p.css){el.style.cssText=p.css;}if(p.children){frag=document.createDocumentFragment();lib.each(p.children,function(b){lib.create(b,frag);});el.appendChild(frag);frag=null;}if(p.insertBefore){p.insertBefore.parentNode.insertBefore(el,p.insertBefore);}else if(parent){parent.appendChild(el);}return el;},
		el : function(id){return typeof(id)==='string'?document.getElementById(id):id;},
		bind : function(f,context){var proxy=function(){var c=arguments.callee;return c._prxyf.apply(c._prxyc || this,arguments);};proxy._prxyf=f;proxy._prxyc=context;proxy.unbind=lib.bind.unbind;f=context=null;return proxy;},
		//bind : function(f,context){return function(){return f.apply(context || this,arguments);};},
		handle : function(el,type,f){type=(type+'').replace(/^on/,'');if(el.addEventListener){el.addEventListener(type,f,false);}else{f.bind(el);el.attachEvent(type,f);}},
		unhandle : function(el,type,f){type=(type+'').replace(/^on/,'');if(el.removeEventListener){el.removeEventListener(type,f,false);}else{if(f._prxyf){f.unbind();f=f._prxyf;}el.detachEvent(type,f);}},
		hide : function(el){if(typeof(el)==='string'){el=lib.el(el);}el.style.display='none';},
		show : function(el){if(typeof(el)==='string'){el=lib.el(el);}el.style.display='';},
		attrs : function(node,obj){ for(var i in obj){if(obj.hasOwnProperty(i)){ node.setAttribute(i, obj[i]); }} },
		mapReduce : function(what,cb,start){var i;start=start||{};if(lib.isArray(what)){for(i=0;i<what.length;i++){cb.call(start,what[i],i,start);}}else{for(i in what){if(what.hasOwnProperty(i)){cb.call(start,what[i],i,start);}}}return start;},
		each : function(what,cb){return lib.mapReduce(what,cb);},
		extend : function(base,ext){lib.each(ext,function(p,i){base[i]=p;});return base;},
		json : window.JSON || (function(){eval("function s(t){return t.replace(/(['\"/\\\\])/gim,'\\\\$1');}function a(v){switch(lib.isArray(v)?'array':typeof(v)) {case 'number':return v+'';case 'string':return '\"'+s(v).replace(/\r?\n/gim,'\\n')+'\"';case 'date':return '\"'+Math.floor(v.getTime()/1000)+'\"';case 'boolean':return v?'true':'false';case 'array':var t=[];for(var i=0; i<v.length; i++){t[i]=strval(v[i]);}return '['+t.join(',')+']';case 'object':return b(v);default:return 'null';}}function b(o){var t=[],c=0,n;for(n in o){if(o.hasOwnProperty(n)){t[c++]='\"'+s(n)+'\":'+a(o[n]);}}return '{'+t.join(',')+'}';}return {stringify:function(obj){return b(obj);},parse:function(str){return eval('(' + str + ')');}}");})(),
		qs : {
			parse : function(s){var p={},c=s.split('&');lib.each(c,function(v,i){i=v.indexOf('=');p[decodeURIComponent(v.substring(0,i))]=decodeURIComponent(v.substring(i+1));});return p;},
			stringify : function(p){var s='';lib.each(p,function(v,k){s+='&'+encodeURIComponent(k)+'='+encodeURIComponent(v);});return s.replace('&','');}
		},
		xml : {
			parse : function(xml){var x;if(window.DOMParser){x=new window.DOMParser().parseFromString(xml,'text/xml');}else{x=new window.ActiveXObject('Microsoft.XMLDOM');x.async='false';x.loadXML(xml);}return x;}
		},
		globalize : function(){lib.extend(window,lib);}
	};
	lib.bind.unbind = function(){this._prxyc=null;};
	
	lib.jsonp.net=function(url,callback,opt){lib.jsonp('http://jsonp.net/'+lib.json.stringify(lib.extend({url:url,callback:"{callback}"}, opt || {})), callback);};
	this.jsonp={net:lib.jsonp.net};
	
	this.picolib=lib;
}());
</script>
<script>
/*jslint browser: true, devel: true, evil: true, onevar: true, undef: true, eqeqeq: true, bitwise: true, regexp: true, newcap: true, immed: true, strict: true */
/**
 *  Cross-Browser HTML5 Context Menu (Partial) Implementation
 */
"use strict";
(function() {
	var styleText,
		head,
		stylesheet,
		addEvent,
		removeEvent,
		fireEvent,
		cancelEvent,
		getElementPosition,
		removeMenu,
		cancelContextMenuEvent,
		commandActionHandler,
		showMenu,
		currentMenu,
		menuOpenTime;
	
	styleText = "menu[type=context]{ z-index:1999; display:none; position:absolute; left:0; top:-9999px; padding:4px 0; margin:1px 0 0 1px; border:1px solid #AAA; background:#F6F6F6; border-radius:5px; -moz-border-radius:5px; -webkit-border-radius:5px; box-shadow:0 3px 20px rgba(0,0,0,0.3); -webkit-box-shadow:0 3px 20px rgba(0,0,0,0.3); -moz-box-shadow:0 3px 20px rgba(0,0,0,0.3); font:15px/1.21 Arial,helvetica,sans; cursor:default; } menu[type=context] command{ background:none; color:#000; display:block; padding:1px 20px; border:none; border-top:1px solid #F6F6F6; border-bottom:1px solid #F6F6F6; cursor:default; } menu[type=context] command:hover{ background:#2A50F4; border-top-color:#6A90FF; border-bottom-color:#1A37D4; color:#FFF; } menu[type=context] command[disabled], menu[type=context] command[disabled]:hover{ color:#999; background:none; border-top-color:#F6F6F6; border-bottom-color:#F6F6F6; } menu[type=context] hr{ display:block; margin:0 2px; font-size:1px; line-height:0; overflow:visible; border:none; border-top:1px solid #D5D5D5; border-bottom:1px solid #FFF; cursor:default; }";
	
	head = document.getElementsByTagName("head");
	if (head && head[0]) {
		stylesheet = document.createElement("style");
		stylesheet.setAttribute("type", "text/css");
		stylesheet.appendChild(document.createTextNode(styleText));
		head[0].appendChild(stylesheet);
	}
	head = null;
	
	
	addEvent = function( obj, type, fn ) {
		if (obj.attachEvent) {
			obj['e'+type+fn] = fn;
			obj[type+fn] = function(){obj['e'+type+fn]( window.event );};
			obj.attachEvent('on'+type, obj[type+fn]);
		}
		else {
			obj.addEventListener(type, fn, false);
		}
	};
	removeEvent = function( obj, type, fn ) {
		if (obj.detachEvent) {
			obj.detachEvent('on'+type, obj[type+fn]);
			obj[type+fn] = null;
		}
		else {
			obj.removeEventListener(type, fn, false);
		}
	};
	
	fireEvent = function (options) {
		var evt, rval, p, preventDefault;
		options = options || {};
		if (document.createEventObject) {		// IE
			evt = document.createEventObject();
			for (p in options) {
				if (options.hasOwnProperty(p)) {
					evt[p] = options[p];
				}
			}
			rval = options.target.fireEvent('on'+options.type.toLowerCase().replace(/^on/,''), evt);
			preventDefault = evt.preventDefault===true;
		}
		else {									// Firefox
			evt = document.createEvent("HTMLEvents");
			evt.initEvent(options.type.toLowerCase().replace(/^on/,''), true, true);
			for (p in options) {
				if (options.hasOwnProperty(p)) {
					try {
						evt[p] = options[p];
					} catch(err) {}
				}
			}
			rval = !options.target.dispatchEvent(evt);
			preventDefault = evt.preventDefault===true;
		}
		
		return {
			evt				: evt,
			preventDefault	: preventDefault,
			rval			: rval
		};
	};
	
	cancelEvent = function(e) {
		e = e || window.event;
		e.preventDefault && e.preventDefault();
		e.stopPropagation && e.stopPropagation();
		e.cancelBubble = true;
		e.returnValue = false;
		return false;
	};
	
	getElementPosition = function(el) {
		var pos = {x:0,y:0};
		do {
			pos.x += parseFloat(el.offsetLeft) || 0;
			pos.y += parseFloat(el.offsetTop) || 0;
		} while ((el=el.parentNode) && el!==document.body);
		return pos;
	};
	
	removeMenu = function() {
		var children, x;
		if (currentMenu && (new Date().getTime()-menuOpenTime)>400) {
			currentMenu.style.display = "none";
			currentMenu.style.top = "-9999px";
			currentMenu.style.left = "0";
			if (currentMenu.__parent) {
				currentMenu.__parent.appendChild(currentMenu);
				delete currentMenu.__parent;
			}
			children = currentMenu.childNodes;
			for (x=0; x<children.length; x++) {
				if ((children[x].nodeName+"").toLowerCase()==="command" && children[x].__action) {
					removeEvent(children[x], "mouseup", children[x].__action);
					delete children[x].__action;
				}
				if (children[x].__labelText) {
					children[x].removeChild(children[x].__labelText);
					delete children[x].__labelText;
				}
			}
			currentMenu = null;
			return false;
		}
	};
	
	cancelContextMenuEvent = function(e) {
		e = e || window.event;
		var target = e.target || e.srcElement,
			button = e.button || e.which,
			cmenu;
		if (button===2) {
			while (!cmenu && target.parentNode && target!==document.body) {
				if (target && target.getAttribute && target.getAttribute("contextmenu")) {
					cmenu = document.getElementById(target.getAttribute("contextmenu"));
				}
				if (!cmenu) {
					target = target.parentNode;
				}
			}
			if (cmenu) {
				return cancelEvent(e);
			}
		}
	};
	
	commandActionHandler = function(e) {
		e = e || window.event;
		/*
		if (this.getAttribute("onclick")) {
			eval('(function(){'+this.getAttribute("onclick")+'})');
		}
		*/
		if (e.button===2 || e.which===2) {
			fireEvent({
				type : "click",
				target : this,
				pageX : e.pageX || e.clientX,
				pageY : e.pageY || e.clientY
			});
		}
		setTimeout(removeMenu, 10);
		return cancelEvent(e);
	};
	
	showMenu = function(e) {
		e = e || window.event;
		var target = e.target || e.srcElement,
			pageX = e.pageX || e.clientX,
			pageY = e.pageY || e.clientY,
			button = e.button || e.which,
			cmenu, attr,
			targetButtonOverride,
			menuShown = false,
			hitMenu = false,
			hitCmenu = false,
			pos, children, x, width, height, posX, posY;
		
		do {
			attr = target.getAttribute("contextmenu");
			cmenu = attr && document.getElementById(attr);
			if (cmenu) {
				hitCmenu = true;
				break;
			}
			else if ((target.nodeName+"").toLowerCase()==="menu" && target.getAttribute("type")==="context") {
				hitMenu = true;
				break;
			}
		} while ((target=target.parentNode) && target!==document.body);
		
		targetButtonOverride = hitCmenu && (/^(on|yes|true|1)$/gim).test(target.getAttribute('data-contextmenu-onclick') || '');
		
		if (button===2 || targetButtonOverride) {
			menuOpenTime = 0;
			removeMenu();
			
			if (hitCmenu && cmenu) {
				fireEvent({
					type	: "show",
					target	: cmenu
				});
				if (cmenu.parentNode!==document.body) {
					cmenu.__parent = cmenu.parentNode;
					document.body.appendChild(cmenu);
				}
				pos = getElementPosition(cmenu.parentNode);
				children = cmenu.childNodes;
				for (x=0; x<children.length; x++) {
					if ((children[x].nodeName+"").toLowerCase()==="command") {
						//addEvent(children[x], "mousedown", cancelEvent);
						addEvent(children[x], "mouseup", commandActionHandler);
						/*
						children[x].__action = children[x].action || (children[x].getAttribute("action") && eval('(function(){'+children[x].getAttribute("action")+'})'));
						if (children[x].__action && !(children[x].getAttribute("disabled")+"").match(/^(disabled|true)?$/gim)) {
							addEvent(children[x], "mouseup", children[x].__action);
						}
						*/
						children[x].__labelText = children[x].appendChild(document.createTextNode(children[x].getAttribute('label') || children[x].label));
					}
				}
				cmenu.style.left = '0';
				cmenu.style.top = '-999em';
				cmenu.style.display = "inline-block";
				width = cmenu.offsetWidth;
				height = cmenu.offsetHeight;
				posX = Math.max(0, Math.min(document.body.offsetWidth-width-10, pageX-pos.x));
				//posX = Math.max(0, pageX-pos.x);
				posY = Math.max(0, pageY-pos.y);
				//if ((posX+width) > document.body.offsetWidth) {
					//posX -= width;
				//}
				if ((posY+height+10) > document.body.offsetHeight) {
					posY -= height+10;
				}
				//posX = Math.max(0, Math.min(document.body.offsetWidth-width-10, pageX-pos.x));
				//posY = Math.max(0, Math.min(document.body.offsetHeight-height-10, pageY-pos.y));
				cmenu.style.left = posX + "px";
				cmenu.style.top = posY + "px";
				currentMenu = cmenu;
				menuShown = true;
				menuOpenTime = new Date().getTime();
			}
			
			if (menuShown || hitMenu) {
				return cancelEvent(e);
			}
		}
	};
	
	//addEvent(document, "mousedown", showMenu);
	//addEvent(document, "mouseup", removeMenu);
	
	addEvent(window, "mousedown", showMenu);
	addEvent(window, "contextmenu", cancelContextMenuEvent);
	addEvent(window, "mouseup", removeMenu);
}());
</script>
</head>
<body>
<input style="position:fixed;top:5px;left:40%;z-index:200;" type="url" id="url" value="http://" onchange="javascript:window.domained=this.value;fetch(this.value);" />
<div style="top:35px;left:0px;position:absolute;z-index:1;width:100%;height:100%;" id="contentR">
</div>
<div id="console">
    <div id="console_output"></div>
</div>
<div id="insp"></div>
<span id="conv"></span>
<script>
function fetch(url) {

    check = url.substr(0,7);
    check = check.toLowerCase();
    if (check != "http://")
    {
    url = "http://"+url;
    }
    else
    {
    url = url;
    }

    var time = new Date().getTime();
    
    // Download some HTML:
    jsonp.net(url, function(res) {
        var body=res.body, dom;
        console.log('Fetch: ', Math.round(new Date().getTime()-time)+'ms');
        
        location.href = '#' + (res.url || url);
        
        // Parse the HTML:
        time = new Date().getTime();
        dom = res.body;
        console.log('Parse: ', Math.round(new Date().getTime()-time)+'ms');
        
        
        document.getElementById('contentR').innerHTML = dom;
        
        // Done!
        
        var sitepoint_link = document.getElementsByTagName('a').length;
        for (var i=0; i<sitepoint_link; i++) {
        	var elemented = document.getElementsByTagName('a')[i];
        	var hrefL = elemented.href.substring(21);
		var hrefA = (location.href.split('#', 2)[1].replace('http://','').replace('https://','').split(/[/?#]/)[0]);
		var hrefF = hrefA+hrefL;
		document.getElementsByTagName('a')[i].removeAttribute("href");
		document.getElementsByTagName('a')[i].setAttribute("onclick", "fetch('"+hrefF+"');");
		document.getElementById('url').value = '';
        }
        document.getElementById('url').value = location.href.split('#', 2)[1];
    });
}
</script>
</body>
</html>